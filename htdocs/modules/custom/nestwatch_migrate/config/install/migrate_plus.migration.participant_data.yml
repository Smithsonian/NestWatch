# Migration configuration for NW Sites Data. We've described most of what goes
# into migration configuration in migrate_plus.migration.beer_term.yml, so won't
# repeat that here.
id: participant_data
label: Importing NW Participants
migration_group: nestwatch
migration_tags:
  - nestwatch migrate participants


source:
  plugin: csv
  path: 'public://import/sites_reduced_backup.csv'
  header_row_count: 1
  keys:
    - siteID
  fields:
    siteID: SiteID
    region: Region
    status: Status
    long: long
    lat: lat
  
  constants:
    password: 'n1ghtHawks!'
    email: 'nestwatch@si.edu'
    roles: 'participant'

  
destination:
  plugin: 'entity:user'

process:
  name: siteID
  mail: constants/email
  pass: constants/password
  field_user_site_location:
    plugin: geofield_latlon
    source:
      - lat
      - long
  field_user_site_region: region
  field_user_site_status: status
  roles: constants/roles

dependencies:
  enforced:
    module:
      - nestwatch_migrate
